<div class="inventory dataset">
    <div class="inventory-sort">
        <div>{{ ::'SORTED_BY' | translate }}</div>
        <div class="button-switch">
            <talend-button-switch
                    values="datasetListCtrl.sortList"
                    current-value="datasetListCtrl.sortSelected"
                    display-key="name"
                    change-action="datasetListCtrl.updateSortBy(selected)">
            </talend-button-switch>
        </div>
        <div> {{ ::'SORT_IN' | translate }} </div>
        <div class="button-switch">
            <talend-button-switch
                    values="datasetListCtrl.orderList"
                    current-value="datasetListCtrl.sortOrderSelected"
                    display-key="name"
                    change-action="datasetListCtrl.updateSortOrder(selected)">
            </talend-button-switch>
        </div>
        <div> {{ ::'SORT_ORDER' | translate }} </div>
    </div>

    <div class="inventory-list" id="datasets-list">
        <div class="inventory-entry" ng-repeat="dataset in datasetListCtrl.datasets track by $index" ng-switch="dataset.draft" id="dataset_{{$index}}" >

            <div class="inventory-icon" ng-switch="dataset.type" ng-click="datasetListCtrl.uploadWorkflowService.openDataset(dataset)">
                <img src="/assets/images/inventory/csv_file.png" ng-switch-when="text/csv"/>
                <img src="/assets/images/inventory/xls_file.png" ng-switch-when="application/vnd.ms-excel"/>
                <img src="/assets/images/inventory/generic_file.png" ng-switch-default/>
                <img ng-src="/assets/images/certification-{{dataset.certificationStep | lowercase}}.png"
                     class="pin"
                     ng-if="dataset.certificationStep!='NONE'"/>
            </div>

            <div class="inventory-text">
                <div class="inventory-title"
                     ng-click="datasetListCtrl.uploadWorkflowService.openDataset(dataset)">{{dataset.name}}</div>
                <div class="inventory-description"
                     ng-click="datasetListCtrl.uploadWorkflowService.openDataset(dataset)">{{ 'INVENTORY_DETAILS' | translate:dataset }}</div>
            </div>

            <!-- Draft actions icons -->
            <div ng-switch-when="true"
                 class="inventory-actions">
                <button class="btn btn-transparent btn-remove" ng-click="datasetListCtrl.delete(dataset)"></button>
            </div>

            <!-- Not draft actions icons -->
            <div ng-switch-when="false" class="inventory-actions">
                <a data-icon="c" class="btn-icon btn-transparent" ng-if="!!dataset.defaultPreparation"
                   ui-sref="nav.home.preparations({prepid: dataset.defaultPreparation.id})"></a>
                <a data-icon="g" class="btn-icon btn-transparent"></a>
                <a data-icon="h" class="btn-icon btn-transparent"></a>
                <div class="divider btn-transparent"></div>
                <a data-icon="e" class="btn-icon btn-transparent"
                   ng-click="datasetListCtrl.delete(dataset)"></a>
                <div class="divider btn-transparent"></div>
                <a data-icon="s" class="btn-icon btn-transparent"
                   ng-click="datasetListCtrl.datasetService.processCertification(dataset)"></a>
                <a data-icon="f" class="btn-icon btn-transparent favorite" ng-class="{'favorite-true':dataset.favorite}"
                   ng-click="datasetListCtrl.datasetService.toggleFavorite(dataset)"></a>
                <div class="divider btn-transparent"></div>
                <a data-icon="y" class="btn-icon btn-transparent" title="clone"
                   ng-click="datasetListCtrl.clone(dataset)"></a>
`                <a data-icon="p" class="btn-icon btn-transparent" title="rename"
                    ng-click="datasetListCtrl.rename(dataset)"></a>
            </div>
        </div>
    </div>

  <talend-modal
      fullscreen="false"
      state="datasetListCtrl.showChangeName"
      disable-enter="true"
      close-button="true">
    <div class="modal-title">Dataset {{ 'RENAME' | translate:dataset }}</div>
    <br/>
    <input type="text" ng-model="datasetListCtrl.currentDataset.name"/>

    <div class="modal-buttons">
      <a class="modal-secondary-button"
         ng-click="datasetListCtrl.showChangeName=false">{{ 'NO_THANKS' | translate:dataset }}</a>
      <a class="modal-primary-button btn-primary"
         ng-click="datasetListCtrl.doRename()">{{ 'RENAME' | translate:dataset }}</a>
      </button>
    </div>

  </talend-modal>

</div>