<div class="inventory dataset">
    <div class="inventory-sort">
        <div class="add-folder-button">
            <button class="btn-primary modal-primary-button" ng-click="datasetListCtrl.actionsOnAddFolderClick()">
                <span translate-once="CREATE_FOLDER"></span>
            </button>
        </div>
        <div translate-once="SORTED_BY"></div>
        <div class="button-switch">
            <talend-button-switch
                    values="datasetListCtrl.sortList"
                    current-value="datasetListCtrl.sortSelected"
                    display-key="name"
                    change-action="datasetListCtrl.updateSortBy(selected)">
            </talend-button-switch>
        </div>
        <div translate-once="SORT_IN"> </div>
        <div class="button-switch">
            <talend-button-switch
                    values="datasetListCtrl.orderList"
                    current-value="datasetListCtrl.sortOrderSelected"
                    display-key="name"
                    change-action="datasetListCtrl.updateSortOrder(selected)">
            </talend-button-switch>
        </div>
        <div translate-once="SORT_ORDER"></div>
    </div>

    <div class="inventory-list" id="datasets-list">
        <div class="inventory-entry" ng-repeat="folder in datasetListCtrl.currentFolderContent.folders track by folder.id">
            <div class="inventory-icon inventory-folder" ng-click="datasetListCtrl.goToFolder(folder)">
                <img src="assets/images/folder/folder-icon.png"/>
            </div>
            <div class="inventory-text inventory-folder">
                <talend-editable-text text="folder.name"
                                      text-class="inventory-title"
                                      on-text-click="datasetListCtrl.goToFolder(folder)"
                                      on-validate="datasetListCtrl.renameFolder(folder, text)"></talend-editable-text>
            </div>
            <div class="inventory-actions">
                <a data-icon="e"
                   class="btn-icon btn-transparent"
                   translate-once-title="DELETE_ACTION"
                   translate-values="{type: 'folder', name: folder.name}"
                   ng-click="datasetListCtrl.removeFolder(folder)"></a>
            </div>
        </div>
        <div ng-repeat="dataset in datasetListCtrl.currentFolderContent.datasets track by $index" id="dataset_{{$index}}">
            <inventory-item
                    actions-enabled="true"
                    copy="datasetListCtrl.openFolderSelection"
                    details="INVENTORY_DETAILS"
                    file-model="datasetListCtrl.updateDatasetFile"
                    item="dataset"
                    open="datasetListCtrl.uploadWorkflowService.openDataset"
                    process-certification="datasetListCtrl.processCertification"
                    remove="datasetListCtrl.remove"
                    rename="datasetListCtrl.rename"
                    toggle-favorite="datasetListCtrl.datasetService.toggleFavorite"
                    type="dataset"
                    update="datasetListCtrl.uploadUpdatedDatasetFile">
            </inventory-item>
        </div>
    </div>

    <talend-modal fullscreen="false"
                  close-button="true"
                  state="datasetListCtrl.folderNameModal"
                  ng-if="datasetListCtrl.folderNameModal"
                  disable-enter="true">
        <span translate-once="ENTER_FOLDER_NAME"></span>
        <form name="datasetListCtrl.folderNameForm" ng-submit="datasetListCtrl.folderNameForm.$valid && datasetListCtrl.addFolder()">
            <input type="text"
                   ng-model="datasetListCtrl.folderName"
                   ng-model-options="{debounce: { default: 300, blur: 0 }}"
                   unique-folder="datasetListCtrl.currentFolderContent.folders"/>

            <div class="modal-buttons">
                <button type="button" class="talend-modal-close btn-secondary modal-secondary-button" translate-once="CANCEL">
                </button>
                <button class="btn-primary modal-primary-button" translate-once="OK"
                        ng-disabled="datasetListCtrl.folderNameForm.$invalid">
                </button>
            </div>
        </form>
    </talend-modal>

    <dataset-copy-move state="datasetListCtrl.datasetCopyVisibility" ng-model="datasetListCtrl.datasetToClone"></dataset-copy-move>

</div>


